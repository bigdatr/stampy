general:
  branches:
    ignore:
      - gh-pages
machine:
    pre:
        - mkdir ~/.yarn-cache
    node:
        version: stable
    environment:
        PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"

dependencies:
    cache_directories:
        - ~/.cache/yarn
    override:
        - yarn install
test:
    override:
        - yarn run test-all
deployment:
    master:
        branch: master
        owner: bigdatr
        commands:
            - git config --global user.email stampy@bigdatr.com
            - git config --global user.name bigdatrbots
            - yarn run deploy-to-gh-pages
